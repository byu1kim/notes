<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.124.1">
    <meta name="description" content="Coding Notes for Byul">
<meta name="author" content="Byul Kim">

    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />

    <title>Auth :: Byul Notes</title>

    
    <link href="/css/nucleus.css?1712035893" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1712035893" rel="stylesheet">
    <link href="/css/hybrid.css?1712035893" rel="stylesheet">
    <link href="/css/featherlight.min.css?1712035893" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1712035893" rel="stylesheet">
    <link href="/css/auto-complete.css?1712035893" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1712035893" rel="stylesheet">
    <link href="/css/theme.css?1712035893" rel="stylesheet">
    <link href="/css/tabs.css?1712035893" rel="stylesheet">
    <link href="/css/hugo-theme.css?1712035893" rel="stylesheet">
    
    <link href="/css/theme-blue.css?1712035893" rel="stylesheet">
    
    <link href="/css/style.css?1712035893" rel="stylesheet">

    <script src="/js/jquery-3.3.1.min.js?1712035893"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800&display=swap"
  rel="stylesheet"
/>

  </head>
  <body class="" data-url="/xtc/php/auth/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <div class="logo">Byul's Notes</div>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1712035893"></script>
<script type="text/javascript" src="/js/auto-complete.js?1712035893"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/localhost:1313\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1712035893"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/leetcode/" title="LeetCode" class="dd-item
        
        
        
        ">
      <a href="/leetcode/">
          <i class='fas fa-book-open'></i> &nbspLeetCode
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/leetcode/theory/" title="Theory" class="dd-item ">
        <a href="/leetcode/theory/">
        <i class='fas fa-pen'></i> &nbspTheory
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/leetcode/easy/" title="Easy" class="dd-item ">
        <a href="/leetcode/easy/">
        <i class='fas fa-pen'></i> &nbspEasy
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/leetcode/medium/" title="Medium" class="dd-item ">
        <a href="/leetcode/medium/">
        <i class='fas fa-pen'></i> &nbspMedium
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/pluralsight/" title="Pluralsight" class="dd-item
        
        
        
        ">
      <a href="/pluralsight/">
          <i class='fas fa-book-open'></i> &nbspPluralsight
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/pluralsight/react/" title="React" class="dd-item ">
        <a href="/pluralsight/react/">
        <i class='fas fa-pen'></i> &nbspReact
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/pluralsight/unittest/" title="Unit Test" class="dd-item ">
        <a href="/pluralsight/unittest/">
        <i class='fas fa-pen'></i> &nbspUnit Test
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/python/" title="Python" class="dd-item
        
        
        
        ">
      <a href="/python/">
          <i class='fas fa-book-open'></i> &nbspPython
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/python/intro/" title="Introduction" class="dd-item ">
        <a href="/python/intro/">
        <i class='fas fa-pen'></i> &nbspIntroduction
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python/basic/" title="Basics" class="dd-item ">
        <a href="/python/basic/">
        <i class='fas fa-pen'></i> &nbspBasics
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python/string/" title="String" class="dd-item ">
        <a href="/python/string/">
        <i class='fas fa-pen'></i> &nbspString
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python/list/" title="Data Structure" class="dd-item ">
        <a href="/python/list/">
        <i class='fas fa-pen'></i> &nbspList, Tuple, Set, Dict
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python/file/" title="Files" class="dd-item ">
        <a href="/python/file/">
        <i class='fas fa-pen'></i> &nbspFiles
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python/regex/" title="Regular Expression" class="dd-item ">
        <a href="/python/regex/">
        <i class='fas fa-pen'></i> &nbspRegex
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python/bs/" title="Beautiful Soup" class="dd-item ">
        <a href="/python/bs/">
        <i class='fas fa-pen'></i> &nbspBeautiful Soup
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python/flask/" title="Flask" class="dd-item ">
        <a href="/python/flask/">
        <i class='fas fa-pen'></i> &nbspFlask
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/python/selenium/" title="Selenium" class="dd-item ">
        <a href="/python/selenium/">
        <i class='fas fa-pen'></i> &nbspSelenium
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/react/" title="React" class="dd-item
        
        
        
        ">
      <a href="/react/">
          <i class='fas fa-book-open'></i> &nbspReact
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/react/1-intro/" title="Intro" class="dd-item ">
        <a href="/react/1-intro/">
        <i class='fas fa-pen'></i> &nbspIntro
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/react/2-route/" title="Route" class="dd-item ">
        <a href="/react/2-route/">
        <i class='fas fa-pen'></i> &nbspRoute
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/react/deploy/" title="Deploy" class="dd-item ">
        <a href="/react/deploy/">
        <i class='fas fa-pen'></i> &nbspDeploy
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/react/fetch/" title="Data Fetching" class="dd-item ">
        <a href="/react/fetch/">
        <i class='fas fa-pen'></i> &nbspData Fetching
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/react/pagination/" title="Pagination" class="dd-item ">
        <a href="/react/pagination/">
        <i class='fas fa-pen'></i> &nbspPagination
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/react/react/" title="react" class="dd-item ">
        <a href="/react/react/">
        <i class='fas fa-pen'></i> &nbspreact
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/react/3-state/" title="Statement Management" class="dd-item ">
        <a href="/react/3-state/">
        <i class='fas fa-pen'></i> &nbspStatement
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/react/table/" title="Table" class="dd-item ">
        <a href="/react/table/">
        <i class='fas fa-pen'></i> &nbspTable
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/react/useeffect/" title="Use Effect" class="dd-item ">
        <a href="/react/useeffect/">
        <i class='fas fa-pen'></i> &nbspUse Effect
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/aws/" title="AWS" class="dd-item
        
        
        
        ">
      <a href="/aws/">
          <i class='fas fa-book-open'></i> &nbspAWS
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/aws/ec2/" title="EC2" class="dd-item ">
        <a href="/aws/ec2/">
        <i class='fas fa-pen'></i> &nbspEC2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/aws/s3/" title="S3" class="dd-item ">
        <a href="/aws/s3/">
        <i class='fas fa-pen'></i> &nbspS3
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/aws/jwt/" title="JWT" class="dd-item ">
        <a href="/aws/jwt/">
        <i class='fas fa-pen'></i> &nbspJWT
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/aws/cognito/" title="Cognito" class="dd-item ">
        <a href="/aws/cognito/">
        <i class='fas fa-pen'></i> &nbspCognito
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/aws/5-lambda/" title="Lambda Function" class="dd-item
        
        
        
        ">
      <a href="/aws/5-lambda/">
          <i class='fas fa-pen'></i> &nbspLambda
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/aws/5-lambda/lambda-function/" title="Lambda Function" class="dd-item ">
        <a href="/aws/5-lambda/lambda-function/">
        - &nbspLambda Function
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/aws/5-lambda/lambda-.net/" title="Lambda in .NET" class="dd-item ">
        <a href="/aws/5-lambda/lambda-.net/">
        - &nbsp.NET
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/aws/iac/" title="Infrastructure as Code" class="dd-item ">
        <a href="/aws/iac/">
        <i class='fas fa-pen'></i> &nbspIaC
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/aws/sst/" title="SST" class="dd-item ">
        <a href="/aws/sst/">
        <i class='fas fa-pen'></i> &nbspSST
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/aws/sst-auth/" title="SST &amp; Auth" class="dd-item ">
        <a href="/aws/sst-auth/">
        <i class='fas fa-pen'></i> &nbspSST &amp; Auth
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/database/" title="Database" class="dd-item
        
        
        
        ">
      <a href="/database/">
          <i class='fas fa-book-open'></i> &nbspDatabase
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/database/sql/" title="Database" class="dd-item ">
        <a href="/database/sql/">
        <i class='fas fa-pen'></i> &nbspDatabase
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/database/mssql/" title="MS SQL" class="dd-item ">
        <a href="/database/mssql/">
        <i class='fas fa-pen'></i> &nbspMS SQL
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/database/monbodb/" title="MongoDB" class="dd-item ">
        <a href="/database/monbodb/">
        <i class='fas fa-pen'></i> &nbspMongoDB
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/javascript/" title="Javascript" class="dd-item
        
        
        
        ">
      <a href="/javascript/">
          <i class='fas fa-book-open'></i> &nbspJavascript
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/javascript/scrap/" title="" class="dd-item ">
        <a href="/javascript/scrap/">
        
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/c/" title="C#" class="dd-item
        
        
        
        ">
      <a href="/c/">
          <i class='fas fa-book-open'></i> &nbspC#
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/c/intro/" title="Intro" class="dd-item ">
        <a href="/c/intro/">
        <i class='fas fa-pen'></i> &nbspIntro
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/c/basic/" title="Basic" class="dd-item ">
        <a href="/c/basic/">
        <i class='fas fa-pen'></i> &nbspBasic
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/c/array/" title="Array" class="dd-item ">
        <a href="/c/array/">
        <i class='fas fa-pen'></i> &nbspArray
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/c/method/" title="Method" class="dd-item ">
        <a href="/c/method/">
        <i class='fas fa-pen'></i> &nbspMethod
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/c/string/" title="String" class="dd-item ">
        <a href="/c/string/">
        <i class='fas fa-pen'></i> &nbspString
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/c/class/" title="Class" class="dd-item ">
        <a href="/c/class/">
        <i class='fas fa-pen'></i> &nbspClass
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/c/linq/" title="Linq" class="dd-item ">
        <a href="/c/linq/">
        <i class='fas fa-pen'></i> &nbspLinq
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/asp.net/" title="ASP.NET" class="dd-item
        
        
        
        ">
      <a href="/asp.net/">
          <i class='fas fa-book-open'></i> &nbspASP.NET
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/asp.net/basic/" title="MVC Basics" class="dd-item ">
        <a href="/asp.net/basic/">
        <i class='fas fa-pen'></i> &nbspMVC Basics
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/asp.net/db/" title="DB Connection" class="dd-item ">
        <a href="/asp.net/db/">
        <i class='fas fa-pen'></i> &nbspDB Connection
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/asp.net/crud/" title="CRUD" class="dd-item ">
        <a href="/asp.net/crud/">
        <i class='fas fa-pen'></i> &nbspCRUD
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/asp.net/linq/" title="Linq" class="dd-item ">
        <a href="/asp.net/linq/">
        <i class='fas fa-pen'></i> &nbspLinq
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/frontend/" title="Frontend" class="dd-item
        
        
        
        ">
      <a href="/frontend/">
          <i class='fas fa-book-open'></i> &nbspFrontend
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/frontend/html/" title="HTML" class="dd-item ">
        <a href="/frontend/html/">
        <i class='fas fa-pen'></i> &nbspHTML
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/frontend/css/" title="CSS" class="dd-item
        
        
        
        ">
      <a href="/frontend/css/">
          <i class='fas fa-pen'></i> &nbspCSS
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/frontend/css/flex/" title="Flexbox" class="dd-item ">
        <a href="/frontend/css/flex/">
        - &nbspFlexbox
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/frontend/css/grid/" title="Grid" class="dd-item ">
        <a href="/frontend/css/grid/">
        - &nbspGrid
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/frontend/css/trasnform/" title="Transform" class="dd-item ">
        <a href="/frontend/css/trasnform/">
        - &nbspTransform
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/frontend/css/etc/" title="" class="dd-item ">
        <a href="/frontend/css/etc/">
        
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/frontend/sass/" title="Sass" class="dd-item ">
        <a href="/frontend/sass/">
        <i class='fas fa-pen'></i> &nbspSass
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/frontend/bootstrap/" title="Bootstrap" class="dd-item ">
        <a href="/frontend/bootstrap/">
        <i class='fas fa-pen'></i> &nbspBootstrap
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/frontend/tailwind/" title="Tailwind" class="dd-item ">
        <a href="/frontend/tailwind/">
        <i class='fas fa-pen'></i> &nbspTailwind
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/xtc/" title="ETC" class="dd-item
        parent
        
        
        ">
      <a href="/xtc/">
          ETC
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/xtc/1job.md/" title="Job Interview" class="dd-item
        
        
        
        ">
      <a href="/xtc/1job.md/">
          <i class='fas fa-pen'></i> &nbspJob Interview
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/xtc/setup/" title="Setup" class="dd-item ">
        <a href="/xtc/setup/">
        <i class='fas fa-pen'></i> &nbspSetup
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/xtc/php/" title="PHP" class="dd-item
        parent
        
        
        ">
      <a href="/xtc/php/">
          <i class='fas fa-pen'></i> &nbspPHP
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/xtc/php/1-docker/" title="Docker" class="dd-item ">
        <a href="/xtc/php/1-docker/">
        - Docker
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/xtc/php/2-setup/" title="Software setup for Laravel" class="dd-item ">
        <a href="/xtc/php/2-setup/">
        - Setup
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/xtc/php/3-intro/" title="Laravel Intro" class="dd-item ">
        <a href="/xtc/php/3-intro/">
        - Laravel Intro
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/xtc/php/sql/" title="MySQL Migration" class="dd-item ">
        <a href="/xtc/php/sql/">
        - MySQL Migration
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/xtc/php/auth/" title="Auth" class="dd-item active">
        <a href="/xtc/php/auth/">
        - Auth
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/xtc/php/admin/" title="Admin" class="dd-item ">
        <a href="/xtc/php/admin/">
        - Admin
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/xtc/work/" title="Work" class="dd-item
        
        
        
        ">
      <a href="/xtc/work/">
          <i class='fas fa-pen'></i> &nbspWork
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/xtc/work/angularjs/" title="Angular JS" class="dd-item ">
        <a href="/xtc/work/angularjs/">
        - Angular JS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/xtc/work/database/" title="Database" class="dd-item ">
        <a href="/xtc/work/database/">
        - Database
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/xtc/work/frontend/" title="Frontend" class="dd-item ">
        <a href="/xtc/work/frontend/">
        - Frontend
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/xtc/work/aspnet/" title="ASP .NET" class="dd-item ">
        <a href="/xtc/work/aspnet/">
        - ASP .NET
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/xtc/angular/" title="Angular.js" class="dd-item
        
        
        
        ">
      <a href="/xtc/angular/">
          <i class='fas fa-pen'></i> &nbspAngular.js
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/xtc/angular/day1/" title="Day1" class="dd-item ">
        <a href="/xtc/angular/day1/">
        - Day1
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/xtc/angular/day2/" title="Day2" class="dd-item ">
        <a href="/xtc/angular/day2/">
        - Day2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/xtc/angular/day3/" title="Day3" class="dd-item ">
        <a href="/xtc/angular/day3/">
        - Day3
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/xtc/vue/" title="Vue.js" class="dd-item
        
        
        
        ">
      <a href="/xtc/vue/">
          <i class='fas fa-pen'></i> &nbspVue.js
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/xtc/vue/day1/" title="Day1" class="dd-item ">
        <a href="/xtc/vue/day1/">
        - Day1
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/xtc/josh/" title="" class="dd-item ">
        <a href="/xtc/josh/">
        
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/'></a> > <a href='/xtc/'>ETC</a> > <a href='/xtc/php/'>PHP</a> > Auth
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#user-registration-form">User Registration Form</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#registration-form-post-handling">Registration Form Post Handling</a></li>
    <li><a href="#csrf-handling">CSRF Handling</a></li>
    <li><a href="#when-request-validation-fails">When Request Validation Fails</a></li>
    <li><a href="#retrieving-and-displaying-old-values">Retrieving and Displaying Old Values</a></li>
    <li><a href="#when-database-constraints-fail">When Database Constraints Fail</a></li>
    <li><a href="#password-confirmation-checking">Password Confirmation Checking</a></li>
    <li><a href="#creating-the-user">Creating the User</a></li>
    <li><a href="#eloquent-mutators">Eloquent Mutators</a></li>
    <li><a href="#login">Login</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#login-form">Login Form</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#flash-messages">Flash Messages</a></li>
    <li><a href="#conditional-output-by-auth">Conditional Output by @auth</a></li>
    <li><a href="#logout">Logout</a></li>
    <li><a href="#guest-and-auth-middleware">Guest and Auth Middleware</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#admin-only-via-custom-middleware">Admin Only via Custom Middleware</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#simple-roles">Simple Roles</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#middleware-groups">Middleware Groups</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#public-storage">Public Storage</a>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Auth
            </h1>
          

        


<h2 id="user-registration-form">User Registration Form</h2>
<p>Let&rsquo;s start by taking a look at the User Model and Table to get a sense of what our form will need to handle.</p>
<p>From the database we can see that name, email, and password columns are not nullable.</p>
<p>From the model we can see that these fields are also mass assignable aka fillable.</p>
<h4 id="form-setup">Form Setup</h4>
<p>To build out our registration functionality we&rsquo;re going to need:</p>
<ul>
<li>A Controller with a create method
<ul>
<li>RegisterUserController</li>
<li>create method</li>
</ul>
</li>
<li>A view to display the create form
<ul>
<li>resources/views/register_user/create.blade.php</li>
</ul>
</li>
<li>A route to the view via the controller</li>
</ul>
<h4 id="set-up-the-controller">Set up the Controller</h4>
<p>In WSL terminal, run:</p>
<pre tabindex="0"><code>sail artisan make:controller RegisterUserController
</code></pre><p>Add the create action to the controller.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RegisterUserController</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Controller</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">create</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">view</span>(<span style="color:#e6db74">&#39;register_user.create&#39;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="set-up-the-form-in-a-view">Set up the Form in a View</h4>
<p>Create resources/views/register_user/create.blade.php</p>
<pre tabindex="0"><code>&lt;x-layout&gt;
  &lt;x-slot name=&#34;content&#34;&gt;
    &lt;main class=&#34;max-w-lg mx-auto&#34;&gt;
      &lt;h1 class=&#34;text-center font-bold text-xl mb-3&#34;&gt;Register User&lt;/h1&gt;
      &lt;form method=&#34;POST&#34; action=&#34;/register&#34;&gt;
        &lt;div class=&#34;mb-6&#34;&gt;
          &lt;label for=&#34;name&#34; class=&#34;block mb-2 uppercase font-bold text-xs text-gray-700&#34;&gt;Name&lt;/label&gt;
          &lt;input type=&#34;text&#34; name=&#34;name&#34; id=&#34;name&#34; required class=&#34;border border-gray-400 rounded p2 w-full&#34;&gt;
        &lt;/div&gt;
        &lt;div class=&#34;mb-6&#34;&gt;
          &lt;label for=&#34;email&#34; class=&#34;block mb-2 uppercase font-bold text-xs text-gray-700&#34;&gt;Email&lt;/label&gt;
          &lt;input type=&#34;text&#34; name=&#34;email&#34; id=&#34;email&#34; required class=&#34;border border-gray-400 rounded p2 w-full&#34;&gt;
        &lt;/div&gt;
        &lt;div class=&#34;mb-6&#34;&gt;
          &lt;label for=&#34;password&#34; class=&#34;block mb-2 uppercase font-bold text-xs text-gray-700&#34;&gt;Password&lt;/label&gt;
          &lt;input type=&#34;text&#34; name=&#34;password&#34; id=&#34;password&#34; required
            class=&#34;border border-gray-400 rounded p2 w-full&#34;&gt;
        &lt;/div&gt;
        &lt;div class=&#34;mb-6&#34;&gt;
          &lt;label for=&#34;confirm-password&#34; class=&#34;block mb-2 uppercase font-bold text-xs text-gray-700&#34;&gt;Confirm
            Password&lt;/label&gt;
          &lt;input type=&#34;text&#34; name=&#34;confirm-password&#34; id=&#34;confirm-password&#34; required
            class=&#34;border border-gray-400 rounded p2 w-full&#34;&gt;
        &lt;/div&gt;
        &lt;div class=&#34;mb-6&#34;&gt;
          &lt;button type=&#34;submit&#34; class=&#34;bg-green-700 text-white rounded py-2 px-4 hover:bg-green-600&#34;&gt;Submit&lt;/button&gt;
        &lt;/div&gt;
      &lt;/form&gt;
    &lt;/main&gt;
  &lt;/x-slot&gt;
&lt;/x-layout&gt;
</code></pre><h4 id="set-up-a-route-to-the-registration-form-via-the-controller">Set up a Route to the Registration Form via the Controller.</h4>
<p>In routes/web.php</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/register&#39;</span>, [<span style="color:#a6e22e">RegisterUserController</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>, <span style="color:#e6db74">&#39;create&#39;</span>]);
</span></span></code></pre></div><p>And import RegisterUserController:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">use</span> <span style="color:#a6e22e">App\Http\Controllers\RegisterUserController</span>;
</span></span></code></pre></div><p>http://localhost/register</p>
<h2 id="registration-form-post-handling">Registration Form Post Handling</h2>
<p>Add a Method to the Controller with some Request Validation</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">store</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">request</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">validate</span>([
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;name&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;required&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;email&#39;</span> <span style="color:#f92672">=&gt;</span> [<span style="color:#e6db74">&#39;required&#39;</span>,<span style="color:#e6db74">&#39;email&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;password&#39;</span> <span style="color:#f92672">=&gt;</span> [<span style="color:#e6db74">&#39;required&#39;</span>,<span style="color:#e6db74">&#39;min:8&#39;</span>],
</span></span><span style="display:flex;"><span>        ]);
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Add a Route</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#39;/register&#39;</span>, [<span style="color:#a6e22e">RegisterUserController</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>, <span style="color:#e6db74">&#39;store&#39;</span>]);
</span></span></code></pre></div><p>error..</p>
<p>Laravel has built in Cross-Site-Request-Forgery protection.</p>
<p>Even though Docker is set up to map port 80 on the host machine to port 80 in the container, we are technically working cross domain here.</p>
<p>Let&rsquo;s configure things so we can post back to Laravel from the browser.</p>
<h2 id="csrf-handling">CSRF Handling</h2>
<p>Before Laravel will actually accept data posted from our form we need to add a directive to our form to protect against CSRF attacks.</p>
<p>Thankfully, Laravel makes this ridiculously easy.</p>
<p>Inside the form in create.blade.php add the following:</p>
<pre tabindex="0"><code>@csrf
</code></pre><p>When Laravel renders the form it will replace that directive with a hidden input containing a token.</p>
<p>When the form is posted, Laravel will validate the token to ensure that it is valid before any processing takes place.</p>
<h2 id="when-request-validation-fails">When Request Validation Fails</h2>
<p>Any time our request validation fails Laravel automatically redirects back to the same page that the request came from.</p>
<p>It also populates an error variable containing the name of the validation rule that failed as well as a message variable which we can use to output the details of that error.</p>
<p>Laravel provides an @error directive with we can use to check for errors against a specified rule.</p>
<p>Let&rsquo;s update our registration create form template to give useful information back to the user if their password is invalid (we specified a minimum length of 8 characters).</p>
<p>Just beneath the password input, add:</p>
<pre tabindex="0"><code>@error(&#39;password&#39;)
&lt;p class=&#34;text-red-500 text-xs mt-1&#34;&gt;{{ $message }}&lt;/p&gt;
@enderror
</code></pre><p>Test it out with a password less than 8 characters long.</p>
<p>We get a useful message back, but all of the fields have been emptied out. That&rsquo;s a UX foul, to be sure.</p>
<p>Hold off on adding in @error directives for the other inputs. We have much left to cover and @error handling will be part of today&rsquo;s assignment.</p>
<h2 id="retrieving-and-displaying-old-values">Retrieving and Displaying Old Values</h2>
<p>Once again, Laravel makes this quite easy to handle.</p>
<p>There is a helper method, old(), that we can use to retrieve old values by name.</p>
<p>Since these will be empty unless we were redirected back to the form due to a validation error we can use them as the value attributes for our form inputs.</p>
<p>That looks like:</p>
<pre tabindex="0"><code>&lt;input type=&#34;text&#34; name=&#34;name&#34; id=&#34;name&#34; value=&#34;{{ old(&#39;name&#39;) }}&#34; ...
</code></pre><p>Go ahead and add these in for both the name and email inputs.</p>
<p>Note: It&rsquo;s best practice NOT to repopulate password fields, so leave those without a value attribute to ensure they are empty each time the form is displayed.</p>
<h2 id="when-database-constraints-fail">When Database Constraints Fail</h2>
<p>If we try submitting the registration form with an email address that already exists in the database we are in for an ugly surprise&hellip; in the form of an unhandled MySQL integrity constraint violation.</p>
<p>In our Controller we&rsquo;re validating that the email is required, but we also need to handle the uniqueness constraint BEFORE it hits the database and barfs at the user.</p>
<p>Laravel FTW.</p>
<p>All we need to do is add another validation rule in the form</p>
<p>unique:<code>&lt;table_name&gt;,&lt;column_name&gt;</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">store</span>() {
</span></span><span style="display:flex;"><span>        $attributes <span style="color:#f92672">=</span> <span style="color:#a6e22e">request</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">validate</span>([
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;name&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;required&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;email&#39;</span> <span style="color:#f92672">=&gt;</span> [<span style="color:#e6db74">&#39;required&#39;</span>,<span style="color:#e6db74">&#39;email&#39;</span>, <span style="color:#e6db74">&#39;unique:users,email&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;password&#39;</span> <span style="color:#f92672">=&gt;</span> [<span style="color:#e6db74">&#39;required&#39;</span>,<span style="color:#e6db74">&#39;min:8&#39;</span>],
</span></span><span style="display:flex;"><span>        ]);
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Since our users table is currently empty, let&rsquo;s tinker in a record and then test the validation rule.</p>
<p>Do you remember how to tinker?</p>
<p>Details below, in white&hellip;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">sail</span> <span style="color:#a6e22e">artisan</span> <span style="color:#a6e22e">tinker</span>
</span></span><span style="display:flex;"><span>$user <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">User</span>;
</span></span><span style="display:flex;"><span>$user<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Josh Solomon&#34;</span>;
</span></span><span style="display:flex;"><span>$user<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">email</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;jsolomon11@bcit.ca&#34;</span>;
</span></span><span style="display:flex;"><span>$user<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">password</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">bcrypt</span>(<span style="color:#e6db74">&#34;CantGuessThis!DoDoDoDo&#34;</span>);
</span></span><span style="display:flex;"><span>$user<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">save</span>();
</span></span></code></pre></div><h2 id="password-confirmation-checking">Password Confirmation Checking</h2>
<p>Before we create our new user we should validate that the user entered the same password in both password fields in the registration form.</p>
<p>Thankfully, Laravel offers a validation rule to accomplish just that.</p>
<p>The only requirement is that the field we want to match against has the same name as the original, but with _confirmation appended.</p>
<p>Previously (and intentionally), I set the name of the second password field to
&ldquo;confirm-password&rdquo;.</p>
<p>Replace that (and the id and label for=&rsquo;&rsquo; ) with &ldquo;password_confirmation&rdquo;.</p>
<p>While we&rsquo;re in here, let&rsquo;s also change the input type of both fields to password.</p>
<p><strong>register_user/create.blade.php</strong></p>
<pre tabindex="0"><code>&lt;label for=&#34;password_confirmation&#34; class=&#34;block mb-2 uppercase font-bold text-xs text-gray-700&#34;&gt;Confirm
Password&lt;/label&gt;
&lt;input type=&#34;password&#34; name=&#34;password_confirmation&#34; id=&#34;password_confirmation&#34; required
class=&#34;border border-gray-400 rounded p2 w-full&#34;&gt;
</code></pre><p><strong>RegisterUserController.php</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>$attributes <span style="color:#f92672">=</span> <span style="color:#a6e22e">request</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">validate</span>([
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;name&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;required&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;email&#39;</span> <span style="color:#f92672">=&gt;</span> [<span style="color:#e6db74">&#39;required&#39;</span>,<span style="color:#e6db74">&#39;email&#39;</span>, <span style="color:#e6db74">&#39;unique:users,email&#39;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;password&#39;</span> <span style="color:#f92672">=&gt;</span> [<span style="color:#e6db74">&#39;required&#39;</span>,<span style="color:#e6db74">&#39;min:8&#39;</span>,<span style="color:#e6db74">&#39;confirmed&#39;</span>],
</span></span><span style="display:flex;"><span>]);
</span></span></code></pre></div><h2 id="creating-the-user">Creating the User</h2>
<p>Now that we&rsquo;re past both the client side and request validation - all we need to do is create a new User, from our User model, passing in the posted form attributes.</p>
<p>In RegisterUserController.php</p>
<p>Import the Model</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">use</span> <span style="color:#a6e22e">App\Models\User</span>;
</span></span></code></pre></div><p>Then, within the store() method:</p>
<ul>
<li>Capture the attributes in a variable</li>
<li>Pass them to the create method of the User model</li>
<li>Redirect to the home page (or where desired)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">store</span>() {
</span></span><span style="display:flex;"><span>        $attributes <span style="color:#f92672">=</span> <span style="color:#a6e22e">request</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">validate</span>([
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;name&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;required&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;email&#39;</span> <span style="color:#f92672">=&gt;</span> [<span style="color:#e6db74">&#39;required&#39;</span>,<span style="color:#e6db74">&#39;email&#39;</span>,<span style="color:#e6db74">&#39;unique:users,email&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;password&#39;</span> <span style="color:#f92672">=&gt;</span> [<span style="color:#e6db74">&#39;required&#39;</span>,<span style="color:#e6db74">&#39;min:8&#39;</span>,<span style="color:#e6db74">&#39;confirmed&#39;</span>],
</span></span><span style="display:flex;"><span>        ]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">User</span><span style="color:#f92672">::</span><span style="color:#a6e22e">create</span>($attributes);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">redirect</span>(<span style="color:#e6db74">&#39;/&#39;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Success, but&hellip; the password is in clear text (not to mention a bad password)!</p>
<h2 id="eloquent-mutators">Eloquent Mutators</h2>
<p>We need a way to encrypt the password before saving it to the database.</p>
<p>If you recall waaaaay back on Monday when we tinkered with Users, we can use the bcrypt library to accomplish this.</p>
<p>We could handle this after validation but before creating our User, but there&rsquo;s a more eloquent way to handle this: Eloquent Mutators.</p>
<p>In Models/User.php let&rsquo;s add a mutator such that any time we are going to set the Password attribute of our User it will be run through bcrypt first.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">setPasswordAttribute</span>($password)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">attributes</span>[<span style="color:#e6db74">&#39;password&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">bcrypt</span>($password);
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>Though we could use a more verbose/explicit syntax, I&rsquo;m using a shorthand by naming my mutator function using the pattern<code> set&lt;AttributeName&gt;Attribute.</code></p>
<p>The same pattern works accessor functions: <code>get&lt;AttributeName&gt;Attribute. </code></p>
<h2 id="login">Login</h2>
<p>When we were validating the registration form data via the request we were indirectly working with Laravel Facades via Inversion-of-Control helpers.</p>
<p>Facades are classes that act as static proxies to underlying classes.</p>
<p>For example, when we ran request()-&gt;validate(), we were working with:</p>
<p>Illuminate\Http\Request;</p>
<p>Without going on too much of a tangent, I encourage you to get familiar with the Facades that Laravel ships with because, in many ways, they are part of what makes Laravel so easy to work with.</p>
<p><a href="https://laravel.com/api/9.x/Illuminate/Http/Request.html">https://laravel.com/api/9.x/Illuminate/Http/Request.html</a></p>
<p><a href="https://laravel.com/docs/9.x/facades#facade-class-reference">https://laravel.com/docs/9.x/facades#facade-class-reference</a></p>
<h4 id="auth">Auth</h4>
<p>In order to log users in and out as well as control what resources they can access, we&rsquo;re going to work with the Auth facade via the auth() helper.</p>
<p><a href="https://laravel.com/api/9.x/Illuminate/Auth.html">https://laravel.com/api/9.x/Illuminate/Auth.html</a></p>
<p>To automatically log in a new user after registration:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>$user <span style="color:#f92672">=</span> <span style="color:#a6e22e">User</span><span style="color:#f92672">::</span><span style="color:#a6e22e">create</span>($attributes);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">auth</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">login</span>($user);
</span></span></code></pre></div><h2 id="login-form">Login Form</h2>
<p>To set up our login form we&rsquo;re going to:</p>
<ul>
<li>Create and use a SessionController</li>
<li>Add get and post routes to /login</li>
<li>Build a login form view</li>
<li>Authenticate the request data against the database</li>
</ul>
<h4 id="make-the-sessioncontroller">Make the SessionController</h4>
<pre tabindex="0"><code>sail artisan make:controller SessionController
</code></pre><h4 id="create-the-login-form-view">Create the login form view</h4>
<p><strong>/resources/views/sessions/create.blade.php</strong></p>
<p>Pillage create.blade.php from register_user, but now we just need email and password.</p>
<p>Remember to change the form action to &ldquo;/login&rdquo; too.</p>
<h4 id="handle-login-form-get-requests">Handle Login Form get requests</h4>
<p><strong>SessionController.php</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">create</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">view</span>(<span style="color:#e6db74">&#39;sessions.create&#39;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h4 id="handle-the-login-request">Handle the Login Request</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">store</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// validate the form data
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    $attributes <span style="color:#f92672">=</span> <span style="color:#a6e22e">request</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">validate</span>([
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;email&#39;</span> <span style="color:#f92672">=&gt;</span> [<span style="color:#e6db74">&#39;required&#39;</span>, <span style="color:#e6db74">&#39;exists:users,email&#39;</span>],
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;password&#39;</span> <span style="color:#f92672">=&gt;</span> [<span style="color:#e6db74">&#39;required&#39;</span>],
</span></span><span style="display:flex;"><span>    ]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// attempt login via the auth helper
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span>( <span style="color:#a6e22e">auth</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">attempt</span>($attributes) ) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">redirect</span>(<span style="color:#e6db74">&#39;/&#39;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// handle auth attempt failure
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">back</span>() <span style="color:#75715e">// send the user back to the form
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">withInput</span>()  <span style="color:#75715e">// send the data back to the form too
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">withErrors</span>([<span style="color:#e6db74">&#39;email&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;Email or Password is invalid.&#39;</span>]); <span style="color:#75715e">// send error and message
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="add-routes">Add Routes</h4>
<p>Import the SessionController</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">use</span> <span style="color:#a6e22e">App\Http\Controllers\SessionController</span>;
</span></span></code></pre></div><p>Get requests will show the form, post will store the user auth in session.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/login&#39;</span>, [<span style="color:#a6e22e">SessionController</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>, <span style="color:#e6db74">&#39;create&#39;</span>]);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#39;/login&#39;</span>, [<span style="color:#a6e22e">SessionController</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>, <span style="color:#e6db74">&#39;store&#39;</span>]);
</span></span></code></pre></div><h2 id="flash-messages">Flash Messages</h2>
<p>We&rsquo;ve got our registration and login handling working now, but we aren&rsquo;t yet giving the user any feedback unless there is an error.</p>
<p>In order to improve the UX, let&rsquo;s add in a mechanism that will provide a temporary message to the user.</p>
<p>Laravel supports this through the session() helper with a flash() method that will persist a key/value pair for a single page load.</p>
<p>Let&rsquo;s start by adding a flash message when a login attempt is successful.</p>
<p><strong>SessionController.php</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>        <span style="color:#75715e">// attempt login via the auth helper
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span>( <span style="color:#a6e22e">auth</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">attempt</span>($attributes) ) {
</span></span><span style="display:flex;"><span>             <span style="color:#75715e">// Set a flash message
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>             $message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Welcome back, &#39;</span> <span style="color:#f92672">.</span> <span style="color:#a6e22e">auth</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">user</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">name</span> <span style="color:#f92672">.</span> <span style="color:#e6db74">&#39;!&#39;</span>;
</span></span><span style="display:flex;"><span>             <span style="color:#a6e22e">session</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">flash</span>(<span style="color:#e6db74">&#39;success&#39;</span>,$message);
</span></span><span style="display:flex;"><span>             <span style="color:#75715e">// Redirect to home page
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">redirect</span>(<span style="color:#e6db74">&#39;/&#39;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span></code></pre></div><p>Now, lets add an area to our layout template that will conditionally display our flash messages.</p>
<p><strong>layout.blade.php</strong></p>
<p>Just below the nav element in our header, add:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#f92672">@</span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">session</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">has</span>(<span style="color:#e6db74">&#39;success&#39;</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;md:flex md:justify-center md:items-center&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">p</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-xs font-bold uppercase border border-green-700 rounded px-4 py-2&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>            {{ <span style="color:#a6e22e">session</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;success&#39;</span>)}}
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/</span><span style="color:#a6e22e">p</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/</span><span style="color:#a6e22e">div</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">@</span><span style="color:#66d9ef">endif</span>
</span></span></code></pre></div><h2 id="conditional-output-by-auth">Conditional Output by @auth</h2>
<p>Rather than just showing a flash message when a user is logged in, let&rsquo;s conditionally change the links in the header.</p>
<p>I&rsquo;ve moved the Projects and About links over to the left next to HOME.</p>
<p>To accomplish the conditional output we can use the @auth directive.</p>
<p>If the user is logged we&rsquo;ll output their name and a Logout link, otherwise we&rsquo;ll output a Login link.</p>
<p>Outputting the name can be accomplished via the auth() and user() helpers.</p>
<p><strong>layout.blade.php</strong></p>
<pre tabindex="0"><code>&lt;div class=&#34;mt-4 md:mt-0&#34;&gt;
            @auth
                &lt;span class=&#34;text-xs font-bold uppercase&#34;&gt; {{ auth()-&gt;user()-&gt;name }} &lt;/span&gt;
                &lt;a href=&#34;/logout&#34; class=&#34;ml-3 text-xs font-bold uppercase&#34;&gt;Logout&lt;/a&gt;
            @else
                &lt;a href=&#34;/login&#34; class=&#34;ml-3 text-xs font-bold uppercase&#34;&gt;Log In&lt;/a&gt;
            @endauth
        &lt;/div&gt;
</code></pre><h2 id="logout">Logout</h2>
<p>To log the user out, all we need to do is:</p>
<ul>
<li>Set up a get route to /logout</li>
<li>Add a destroy method to our SessionController
<ul>
<li>Call auth()-&gt;logout()</li>
<li>Redirect</li>
</ul>
</li>
</ul>
<p>routes/web.php</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/logout&#39;</span>, [<span style="color:#a6e22e">SessionController</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>, <span style="color:#e6db74">&#39;destroy&#39;</span>]);
</span></span></code></pre></div><p>app/Http/Controllers/SessionController.php</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">destroy</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Log them out
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">auth</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">logout</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Redirect to Home
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">redirect</span>(<span style="color:#e6db74">&#39;/&#39;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h2 id="guest-and-auth-middleware">Guest and Auth Middleware</h2>
<p>Although we&rsquo;re conditionally showing/hiding links depending on whether a user is authenticated or not, this is not implementing any control over who can access which routes. To actually protect routes we&rsquo;ll need to use middleware.</p>
<p>Recall from our lesson on Express.js, middleware are just sets of things that happen between a request being received and a response being sent.</p>
<p>In Laravel we get a set of middleware out-of-the-box.</p>
<p>You&rsquo;ll find them defined in the files under app/Http/Middleware as well as in app/Kernel.php</p>
<p>Towards the bottom of app/Kernel.php you will see a protected property called $routeMiddleware.</p>
<p>Let&rsquo;s use a couple of those to control access to specific routes.</p>
<h4 id="guest-only-routes">Guest Only Routes</h4>
<p>Login really only make sense to be used by unauthenticated users - aka guests.</p>
<p>In web.php, let&rsquo;s enforce that via the &lsquo;guest&rsquo; middleware with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/login&#39;</span>, [<span style="color:#a6e22e">SessionController</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>, <span style="color:#e6db74">&#39;create&#39;</span>])<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">middleware</span>(<span style="color:#e6db74">&#39;guest&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#39;/login&#39;</span>, [<span style="color:#a6e22e">SessionController</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>, <span style="color:#e6db74">&#39;store&#39;</span>])<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">middleware</span>(<span style="color:#e6db74">&#39;guest&#39;</span>);
</span></span></code></pre></div><h4 id="authenticated-users-only-route">Authenticated Users Only Route</h4>
<p>Let&rsquo;s make the logout route only accessible to authenticated users.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/logout&#39;</span>, [<span style="color:#a6e22e">SessionController</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>, <span style="color:#e6db74">&#39;destroy&#39;</span>])<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">middleware</span>(<span style="color:#e6db74">&#39;auth&#39;</span>);
</span></span></code></pre></div><p>If you test these out, either as a guest trying to log out, or as an already authenticated user trying to log in you will either get an error or a 404 page respectively.</p>
<p>Let&rsquo;s deal with former first.</p>
<h4 id="a-guest-trying-to-access-auth-only-routes">A Guest Trying to Access Auth Only Routes</h4>
<p>When a guest tries to access a route that is protected with middleware(&lsquo;auth&rsquo;), such as the logout page, you&rsquo;ll see the following error:</p>
<p>This is because the auth middleware is attempting to redirect the user to a route named &ldquo;login&rdquo;. This is defined in app/Http/Middleware/Authenticate.php</p>
<p>Although we do have a route defined for the path /login, we need to map that to the name login in order for this redirect to work.</p>
<p>Note: An alternative would be edit the Authenticate middleware itself, but best not to meddle with pre-existing middleware unless you have a thorough sense of where else it may be in use or what else might be relying on it.</p>
<h4 id="naming-a-route">Naming a Route</h4>
<p>Open up routes/web.php and edit as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/login&#39;</span>, [<span style="color:#a6e22e">SessionController</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>, <span style="color:#e6db74">&#39;create&#39;</span>])<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">name</span>(<span style="color:#e6db74">&#39;login&#39;</span>)<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">middleware</span>(<span style="color:#e6db74">&#39;guest&#39;</span>);
</span></span></code></pre></div><p>Note: We need to name() our route before middleware(&lsquo;guest&rsquo;).</p>
<p>Make sure that you are not logged in and then try to access http://localhost/logout</p>
<h4 id="an-authenticated-user-trying-to-access-a-guest-only-route">An Authenticated User Trying to Access a Guest Only Route</h4>
<p>When an authenticated user attempts to access a guest route we don&rsquo;t get an error, but instead they are automatically redirected to the URL /home, which results in a 404 unless we have a get route defined at that URL.</p>
<p>We could handle this by adding a /home route, but instead let&rsquo;s add a generic fallback route that redirects any invalid requests to / and adds a flash message.</p>
<h4 id="fallback-routes">Fallback Routes</h4>
<p>Beneath all other routes in web.php, add:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">fallback</span>(<span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Set a flash message
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">session</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">flash</span>(<span style="color:#e6db74">&#39;error&#39;</span>,<span style="color:#e6db74">&#39;Requested page not found.  Home you go.&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Redirect to /
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">redirect</span>(<span style="color:#e6db74">&#39;/&#39;</span>);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h4 id="displaying-session-error-messages">Displaying Session Error Messages</h4>
<p>We already outputting session success messages between the header and content in our layout, so that&rsquo;s the obvious place to add in an @elseif</p>
<pre tabindex="0"><code>   @if (session()-&gt;has(&#39;success&#39;))
        &lt;div class=&#34;flex justify-center items-center bg-gray-100 w-full py-3&#34;&gt;
            &lt;p class=&#34;text-xs font-bold bg-white uppercase border border-green-700 rounded px-4 py-2&#34;&gt;
                {{ session()-&gt;get(&#39;success&#39;) }}
            &lt;/p&gt;
        &lt;/div&gt;
    @elseif (session()-&gt;has(&#39;error&#39;))
        &lt;div class=&#34;flex justify-center items-center bg-gray-100 w-full py-3&#34;&gt;
            &lt;p class=&#34;text-xs color-red-500 font-bold bg-white uppercase border border-red-700 rounded px-4 py-2&#34;&gt;
                {{ session()-&gt;get(&#39;error&#39;) }}
            &lt;/p&gt;
        &lt;/div&gt;
    @endif
</code></pre><h2 id="admin-only-via-custom-middleware">Admin Only via Custom Middleware</h2>
<p>There are numerous ways that we could handle role-based authorization, but given the nature of what we&rsquo;re building let&rsquo;s start with the very simplest: Custom middleware that only allows specific users to proceed, based solely on their email address.</p>
<h4 id="making-middleware">Making Middleware</h4>
<p>In your Ubuntu terminal, run:</p>
<pre tabindex="0"><code>sail artisan make:middleware AdminOnly
</code></pre><h4 id="restricting-access-to-admins-by-email-address">Restricting Access to Admins by Email Address</h4>
<p>Open app/Http/Middleware/AdminOnly.php</p>
<p>At the top, import the Response class with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Illuminate\Http\Response</span>;
</span></span></code></pre></div><p>Next, replace the body of the handle method with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">auth</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">user</span>()<span style="color:#f92672">?-&gt;</span><span style="color:#a6e22e">email</span> <span style="color:#f92672">!==</span> <span style="color:#e6db74">&#39;jsolomon11@bcit.ca&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">abort</span>(<span style="color:#a6e22e">Response</span><span style="color:#f92672">::</span><span style="color:#a6e22e">HTTP_FORBIDDEN</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> $next($request);
</span></span></code></pre></div><h4 id="registering-our-middleware">Registering our Middleware</h4>
<p>Open app/Kernel.php (one level up from the Middleware directory).</p>
<p>Towards the bottom you will find where $routeMiddleware is defined as an associative array. These, of course, are the middleware that can be applied to specific routes.</p>
<p>Let&rsquo;s add our to the top (keeping things alphabetical):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#e6db74">&#39;admin&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">\App\Http\Middleware\AdminOnly</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>,
</span></span></code></pre></div><h4 id="applying-our-middleware-to-a-route">Applying our middleware to a Route</h4>
<p>For now, let&rsquo;s just create an admin route and apply our middleware to it.</p>
<p>In routes/web.php, add:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/admin/projects&#39;</span>, [<span style="color:#a6e22e">ProjectController</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>, <span style="color:#e6db74">&#39;index&#39;</span>])<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">middleware</span>(<span style="color:#e6db74">&#39;admin&#39;</span>);
</span></span></code></pre></div><p>If the authenticated user is an admin, they&rsquo;ll be able to see the project index at http://localhost/admin/projects</p>
<p>Anyone else, including guests, should get a 403 &ldquo;forbidden&rdquo; response.</p>
<h2 id="simple-roles">Simple Roles</h2>
<p>We&rsquo;ve locked down certain routes via middleware, but it would also be useful to have a method in our user model that we can call in order to conditionally output elements in a page.</p>
<p>Add the following in app/Models/User.php</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">isAdmin</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> ($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">email</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;jsolomon11@bcit.ca&#39;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h4 id="add-an-admin-only-link-between-the-user-name-and-logout">Add an admin only link between the user name and logout</h4>
<p>resources/views/components/layout.blade.php</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>       <span style="color:#f92672">@</span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">auth</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">user</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">isAdmin</span>())
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/admin/projects&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ml-4 text-s font-bold uppercase&#34;</span><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">Admin</span><span style="color:#f92672">&lt;/</span><span style="color:#a6e22e">a</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">@</span><span style="color:#66d9ef">endif</span>
</span></span></code></pre></div><p>Update the AdminOnly middleware</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">use</span> <span style="color:#a6e22e">App\Models\User</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">handle</span>(<span style="color:#a6e22e">Request</span> $request, <span style="color:#a6e22e">Closure</span> $next)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    $user <span style="color:#f92672">=</span> $request<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">user</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(<span style="color:#f92672">!</span>$user<span style="color:#f92672">?-&gt;</span><span style="color:#a6e22e">isAdmin</span>()) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">abort</span>(<span style="color:#a6e22e">Response</span><span style="color:#f92672">::</span><span style="color:#a6e22e">HTTP_FORBIDDEN</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> $next($request);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="middleware-groups">Middleware Groups</h2>
<p>If we have a set of routes that we want to apply the same middleware to, we can do so more cleanly through the use of middleware groups.</p>
<h4 id="applying-middleware-to-route-groups">Applying Middleware to Route Groups</h4>
<p>In web.php remove the route that we set up in the last step and replace it with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">middleware</span>([<span style="color:#e6db74">&#39;auth&#39;</span>, <span style="color:#e6db74">&#39;admin&#39;</span>])<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">group</span>(<span style="color:#66d9ef">function</span> () {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/admin/projects&#39;</span>, [<span style="color:#a6e22e">ProjectController</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>, <span style="color:#e6db74">&#39;index&#39;</span>]);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Route</span><span style="color:#f92672">::</span><span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;/admin/projects/{project}&#39;</span>, [<span style="color:#a6e22e">ProjectController</span><span style="color:#f92672">::</span><span style="color:#a6e22e">class</span>, <span style="color:#e6db74">&#39;show&#39;</span>]);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>Try navigating to :</p>
<p>http://localhost/admin/projects</p>
<p>Assuming you have a project with the slug &lsquo;portfolio-showcase&rsquo;, also try:</p>
<p>http://localhost/admin/projects/portfolio-showcase</p>
<p>Note: clicking the link from the admin version of the index take you out of the admin area&hellip; That&rsquo;s expected. We won&rsquo;t be setting up an admin index shortly.</p>
<h2 id="public-storage">Public Storage</h2>
<p>Next week we&rsquo;ll be adding in the ability to upload a thumbnail and image for each project.</p>
<p>In preparation for that, let&rsquo;s make an images directory available and drop in some placeholders so that we can start redesigning our project card.</p>
<h4 id="creating-a-symlink-to-public-storage-directory">Creating a Symlink to Public Storage Directory</h4>
<pre tabindex="0"><code>sail artisan storage:link
</code></pre><p>Within that folder, create an images folder and add in some placeholder and thumbnail images.</p>
<h4 id="accessing-files-in-public-storage">Accessing Files in Public Storage</h4>
<p>In order to access the files in public you will need to use the url() helper.</p>
<p>The path should begin with storage, but not include &ldquo;app/public&rdquo;. That part is handled by the symlink we created above.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{url(&#39;storage/images/placeholder_thumb.svg&#39;)}}&#34;</span>
</span></span></code></pre></div>

<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/xtc/php/sql/" title="MySQL Migration"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/xtc/php/admin/" title="Admin" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1712035893"></script>
    <script src="/js/perfect-scrollbar.min.js?1712035893"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1712035893"></script>
    <script src="/js/jquery.sticky.js?1712035893"></script>
    <script src="/js/featherlight.min.js?1712035893"></script>
    <script src="/js/highlight.pack.js?1712035893"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1712035893"></script>
    <script src="/js/learn.js?1712035893"></script>
    <script src="/js/hugo-learn.js?1712035893"></script>
    
        
            <script src="/mermaid/mermaid.js?1712035893"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

